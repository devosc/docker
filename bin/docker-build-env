#!/usr/bin/env bash

build_env_file="$( cd "$(dirname "$0")" ; pwd -P )/../.build.env"

if [ ! -f  $build_env_file ]; then
    if [ -z "$TZ" ]; then
        dir=$(pwd)
        cd /usr/share/zoneinfo
        #https://superuser.com/a/639096
        TIME_ZONE="$(find * -type f -exec sh -c "diff -q /etc/localtime '{}' > /dev/null && echo {}" \;)"
        TIME_ZONE=($TIME_ZONE)
        TIME_ZONE="${TIME_ZONE[0]}"
        TZ=$TIME_ZONE
        cd $dir
    fi
    {
        echo "export USER_ID=$(id -u)";
        echo "export GROUP_ID=$(id -g)";
        echo "export TZ=$TZ";
    } > $build_env_file

fi

source $build_env_file
