#!/usr/bin/env bash

# creates project in docker www directory (experimental).

project_dir="$( dirname "${BASH_SOURCE[0]}" )/../www"

[ -d $project_dir/html ] && document_root="$project_dir/html" || document_root="$project_dir/public"

find $project_dir -type f -delete
find $project_dir -type l -delete
find $project_dir/* -type d -delete

if [ "wordpress" = "$1" ]; then
    wget https://wordpress.org/latest.tar.gz
    tar -xzvf latest.tar.gz --directory $project_dir
    mv $project_dir/wordpress $document_root
    rm latest.tar.gz
    #wp-config.php
    #define('WP_DEBUG', false);
    #if (isset($_SERVER['HTTP_X_FORWARDED_PROTO']) && $_SERVER['HTTP_X_FORWARDED_PROTO'] === 'https') {
        # $_SERVER['HTTPS'] = 'on'; define('FORCE_SSL_ADMIN', true);
    #}
elif [ "laravel" = "$1" ]; then
    docker-composer create-project --prefer-dist laravel/laravel .
elif [ "symfony" = "$1" ]; then
    docker-composer create-project --prefer-dist symfony/website-skeleton .
elif [ "phpinfo" = "$1" ]; then
    mkdir -p $document_root
    cat <<EOT >> $document_root/index.php
<?php

phpinfo();
EOT
else
    docker-composer create-project mvc5/mvc5-application .
fi
